<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>User flow</title>
  <!-- Bootstrap core CSS -->
  <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <!-- Additional CSS Files -->
  <link rel="stylesheet" href="assets/css/fontawesome.css">
  <link rel="stylesheet" href="assets/css/templatemo-tale-seo-agency.css">
  <link rel="stylesheet" href="assets/css/owl.css">
  <link rel="stylesheet" href="assets/css/animate.css">
  <link rel="stylesheet" href="https://unpkg.com/swiper@7/swiper-bundle.min.css" />

  <style>
    .header-area {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      z-index: 1000; /* Ensure the navbar is on top of other content */
    }
    .page-heading {
  padding: 60px 0px;
  margin-top: 110px;
}
svg {
    font: 10px sans-serif;
    padding: 10px;
  }

  .axis,
  .frame {
    shape-rendering: crispEdges;
  }

  .axis line {
    stroke: #ddd;
  }

  .axis path {
    display: none;
  }

  .cell text {
    font-weight: bold;
    text-transform: capitalize;
  }

  .frame {
    fill: none;
    stroke: #aaa;
  }

  circle {
    fill-opacity: 0.7;
  }

  circle.hidden {
    fill: #ccc !important;
  }

  .extent {
    fill: #000;
    fill-opacity: 0.125;
    stroke: #fff;
  }

  .axis-label {
    font-size: 12px; /* Adjust font size as needed */
    fill: black; /* Color of the axis labels */
  }
  </style>

 
</head>

<body>
  <!-- ***** Header Area Start ***** -->
  <header class="header-area header-sticky">
    <div class="container">
      <div class="row">
        <div class="col-md-2 mx-0"> <!-- Adjust the column width as needed -->
          <nav class="main-nav">
            <!-- ***** Menu Start ***** -->
            <ul class="nav flex-column"> <!-- Utilizing Bootstrap's flex-column class to align the tabs vertically -->
              <li class="scroll-to-section"><a href="index.html" class="active">Build</a></li>
              <li class="scroll-to-section"><a href="index.html#services">Reasons</a></li>
              <li class="scroll-to-section"><a href="index.html#projects">Consequences</a></li>
                  <li><a href="charts.html">Charts</a></li>
              </li>
            </ul>
            <a class='menu-trigger'>
              <span>Menu</span>
            </a>
            <!-- ***** Menu End ***** -->
          </nav>
        </div>
      </div>
    </div>
  </header>
  
  
  
  <!-- ***** Header Area End ***** -->

  <div class="page-heading">
  
    <h6 class="text-center mt-0">Our visualisations</h6>

       

      <ul class="nav nav-tabs justify-content-center py-3" id="myTab" role="tablist">
        <li class="nav-item" role="presentation">
          <button class="nav-link active" id="task1-tab" data-bs-toggle="tab" data-bs-target="#task1" type="button" role="tab" aria-controls="task1" aria-selected="true">Task 1</button>
        </li>
        <li class="nav-item" role="presentation">
          <button class="nav-link" id="task2-tab" data-bs-toggle="tab" data-bs-target="#task2" type="button" role="tab" aria-controls="task2" aria-selected="false"> Task 2</button>
        </li>
        <li class="nav-item" role="presentation">
          <button class="nav-link" id="task3-tab" data-bs-toggle="tab" data-bs-target="#task3" type="button" role="tab" aria-controls="task3" aria-selected="false">Task 3</button>
        </li>
      </ul>
      

      <div class="tab-content py-4" id="myTabContent">
        <div class="tab-pane fade show active" id="task1" role="tabpanel" aria-labelledby="task1-tab">
            <div class = "container">
                <h6 class="pb-2 text-center">An Overview of Population and Fertility Rate Statistics</h6> <br><br>
            </div> 


<!-- Load d3.js -->
<script src="https://d3js.org/d3.v4.js"></script>

<!-- python3 -m http.server 8000 -->

<!-- select buttons -->

<div id="selectionBox"> 
  <select id="selectButtonCountry"></select>
  <button type="button" id="selectSg" class="btn btn-secondary">Singapore</button>
</div>
<div id="container">
  <div id="my_dataviz"></div>
  <div id="viz_container"></div>
</div>

<h5 style="color: purple;" align="center">Global Trends: Fertility Rates Over Time</h5> <br>
<!-- racing chart -->
<div id="observablehq-viewof-replay-f0ea302e"></div>
<div id="observablehq-chart-f0ea302e"></div>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@observablehq/inspector@5/dist/inspector.css"> 

<!-- Color Scale -->
<script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>

<script type="module">
// racing chart
import {Runtime, Inspector} from "https://cdn.jsdelivr.net/npm/@observablehq/runtime@5/dist/runtime.js";
import define from "https://api.observablehq.com/d/a2eb0714a8e5d43c.js?v=4";
new Runtime().module(define, name => {
  if (name === "viewof replay") return new Inspector(document.querySelector("#observablehq-viewof-replay-f0ea302e"));
  if (name === "chart") return new Inspector(document.querySelector("#observablehq-chart-f0ea302e"));
});

// Append the title with inline style
var title = d3.select("#my_dataviz")
    .append("h5")
    .style("color", "purple")
    .text("Changes in Fertility Rate Over Time");


fertilityOverTime()


populationPyramid("1950","Afghanistan")
var selectedCountry = ""

function fertilityOverTime(){
    // set the dimensions and margins of the graph
    var dataFilter = []
    
    var margin = {top: 20, right: 30, bottom: 30, left: 60},
        width = 500 - margin.left - margin.right,
        height = 400 - margin.top - margin.bottom;
    

    // append the svg object to the body of the page
    var svg = d3.select("#my_dataviz")
      .append("svg")
        .attr("width", width + margin.left + margin.right)
        .attr("height", height + margin.top + margin.bottom)
      .append("g")
        .attr("transform",
              "translate(" + margin.left + "," + margin.top + ")")
      
    //Read the data
      d3.csv("children-per-woman-un3 2.csv", function(data) {
    
        // dataFilter = data
        var allGroup = d3.map(data, function(d){return(d.name)}).keys()
        // add the options to the button
        d3.select("#selectButtonCountry")
          .selectAll('myOptions')
             .data(allGroup)
          .enter()
            .append('option')
          .text(function (d) { return d; }) // text showed in the menu
          .attr("value", function (d) { return d; }) // corresponding value returned by the button
    
        // A color scale: one color for each group
        var myColor = d3.scaleOrdinal()
          .domain(allGroup)
          .range(d3.schemeSet2);
    
        // Add X axis --> it is a date format
        var x = d3.scaleLinear()
          .domain(d3.extent(data, function(d) { return d.year; }))
          .range([0, width]);
        svg.append("g")
          .attr("transform", "translate(0," + height + ")")
          .call(d3.axisBottom(x).ticks(7));
    
        // Add Y axis
        var y = d3.scaleLinear()
          .domain([0, d3.max(data, function(d) { return +d.n; })])
          .range([ height, 0 ]);
        svg.append("g")
          .call(d3.axisLeft(y));
    
        // Initialize line with first group of the list
        var line = svg
          .append('g')
          .append("path")
            .datum(data.filter(function(d){return d.name==allGroup[0]}))
            .attr("d", d3.line()
              .x(function(d) { return x(d.year) })
              .y(function(d) { return y(+d.n) })
            )   
            .attr("stroke", function(d){ return myColor("valueA") })
            .style("stroke-width", 4)
            .style("fill", "none")
    
        // When the button is changed, run the updateChart function
        d3.select("#selectButtonCountry").on("change", function(d) {
    
            // recover the option that has been chosen
            var selectedOption = d3.select(this).property("value")
            // run the updateChart function with this selected option
            updateFertilityLine(selectedOption)
            selectedCountry = selectedOption
            populationPyramid("1950",selectedOption)
        })
        d3.select("#selectSg").on("click", function(d) {
            updateToSG()
        })

  // tooltip
         var Tooltip = d3.select("#my_dataviz")
        .append("div")
        .style("opacity", 100)
        .attr("class", "tooltip")
        .style("background-color", "white")
        .style("border", "solid")
        .style("border-width", "2px")
        .style("border-radius", "5px")
        .style("padding", "5px")
        .html("Year:"+ "<br>"+ "Fertility Rate:")

    function updateFertilityLine(selectedGroup) {
          // Create new data with the selection?
          dataFilter = data.filter(function(d){return d.name==selectedGroup})
          // Give these new data to update line
          line
              .datum(dataFilter)
              .transition()
              .duration(1000)
              .attr("d", d3.line()
                .x(function(d) { return x(d.year) })
                .y(function(d) { return y(+d.n) })
              )
              .attr("stroke", function(d){ return myColor(selectedGroup) })
        }

        function updateToSG() {
          document.getElementById('selectButtonCountry').value = 'Singapore';
           
          dataFilter = data.filter(function(d){return d.name=="Singapore"})
          
          // Give these new data to update line
          line
              .datum(dataFilter)
              .transition()
              .duration(1000)
              .attr("d", d3.line()
                .x(function(d) { return x(d.year) })
                .y(function(d) { return y(+d.n) })
              )
              // .attr("stroke", function(d){ return myColor(selectedGroup) })
        }
        updateFertilityLine("All")
    svg
        .on("mousemove", mousemove)
      
    // Define the bisectDate function
var bisectDate = d3.bisector(function(d) { return d.year; }).left;

// Now you can use the bisectDate function in your mousemove function
function mousemove() {
    var x0 = x.invert(d3.mouse(this)[0]);
    var i = bisectDate(dataFilter, x0, 1);
    var d0 = dataFilter[i - 1];
    var d1 = dataFilter[i];
    var d = x0 - d0.year > d1.year - x0 ? d1 : d0;

    Tooltip.html("Year: <b>" + d.year + "</b> <br>"+ "Fertility Rate: <b>" + d.n + "</b>");
    populationPyramid(d.year, selectedCountry);
  }

     })
    }

function populationPyramid(year,country){
  // set the dimensions and margins of the graph
  const margin = {top: 20, right: 20, bottom: 30, left: 60};
  const width = 450 - margin.left - margin.right;
  const height = 350 - margin.top - margin.bottom;

  // append the svg object to the body of the page
  const svg = d3.select("#viz_container")
    .append("svg")
      .attr("width", "100%")
      .attr("height", "100%")
      .attr("viewBox", "0 0 450 350")
      .attr("preserveAspectRatio", "xMinYMin")
    .append("g")
      .attr("transform", `translate(${margin.left}, ${margin.top})`);

  // parse the Data
  
  d3.csv("population_pyramid_1950-2022 edited 2 2.csv", function(data){
    data = data.filter(function(d){return d.Country==country})
    data = data.filter(function(d){return d.Year==year})
    
    
    // var allGroupPyramidYear = Array.from(new Set(d3.map(data, function(d){return(d.Year)})).keys())
    // d3.select("#selectButtonPyramidYear")
    //   .selectAll('myOptions')
    //       .data(allGroupPyramidYear)
    //   .enter()
    //     .append('option')
    //   .text(function (d) { return d; }) // text showed in the menu
    //   .attr("value", function (d) { return d; }) // corresponding value returned by the button

    // var allGroupPyramidCountry = Array.from(new Set(d3.map(data, function(d){return(d.Country)})).keys())
    // d3.select("#selectButtonPyramidCountry")
    //   .selectAll('myOptions')
    //       .data(allGroupPyramidCountry)
    //   .enter()
    //     .append('option')
    //   .text(function (d) { return d; }) // text showed in the menu
    //   .attr("value", function (d) { return d; }) // corresponding value returned by the button

  // X scale and Axis
  const xScaleMale = d3.scaleLinear()
    .domain([0, d3.max(data, d => +d.male)])
    .range([width/2, 0]);
  svg
    .append("g")
        .attr("transform", `translate(0, ${height})`)
    .call(d3.axisBottom(xScaleMale).tickSize(0).tickPadding(3).ticks(7, "%"))
    .call(function(d) { return d.select(".domain").remove()});

  const xScaleFemale = d3.scaleLinear()
    .domain([0, d3.max(data, d => +d.female)])
    .range([width/2, width]);
  svg
    .append("g")
        .attr("transform", `translate(0, ${height})`)
    .call(d3.axisBottom(xScaleFemale).tickSize(0).tickPadding(3).ticks(7, "%"))
    .call(function(d) { return d.select(".domain").remove()});

  // Y scale and Axis
  const yScale = d3.scaleBand()
      .domain(data.map(d => d.Age))
      .range([height, 0])
      .padding(.25);
  svg
      .append("g")
      .call(d3.axisLeft(yScale).tickSize(0).tickPadding(15))
      .call(d => d.select(".domain").remove());

  svg.selectAll(".maleBar")
    .data(data)
    .enter()
    .append("rect")
    .attr("class", "barMale")
    .attr("x", d => xScaleMale(d.male))
      .attr("y", d => yScale(d.Age))
    .attr("width", function(d) { return width/2 - xScaleMale(d.male); })
    .attr("height", yScale.bandwidth())
    .style("fill", "#18375F")

  // create female bars
  svg.selectAll(".femaleBar")
    .data(data)
    .enter()
    .append("rect")
    .attr("class", "barFemale")
    .attr("x", function(d) { return xScaleFemale(0); })
    .attr("y", function(d) { return yScale(d.Age); })
    .attr("width", function(d) { return xScaleFemale(d.female) - xScaleFemale(0); })
    .attr("height", yScale.bandwidth())
    .style("fill", "#0072BC")

  // set title
//   svg
//     .append("text")
//       .attr("class", "chart-title")
//       .attr("x", -(margin.left)*0.7)
//       .attr("y", -(margin.top)/1.5)
//       .attr("text-anchor", "start")
//     .text("Demographics of forcibly displaced people | 2020")

  // set source
//   svg
//     .append("text")
//       .attr("class", "chart-source")
//       .attr("x", -(margin.left)*0.7)
//       .attr("y", height + margin.bottom*0.7)
//       .attr("text-anchor", "start")
//     .text("Source: UNHCR")

//   // set copyright
//   svg
//     .append("text")
//       .attr("class", "copyright")
//       .attr("x", -(margin.left)*0.7)
//       .attr("y", height + margin.bottom*0.9)
//       .attr("text-anchor", "start")
//     .text("©UNHCR, The UN Refugee Agency")

  //set legend
  svg
      .append("rect")
          .attr("x", -(margin.left)*0.7)
          .attr("y", -(margin.top/1.5))
          .attr("width", 13)
          .attr("height", 13)
          .style("fill", "#18375F")
  svg
      .append("text")
          .attr("class", "legend")
          .attr("x", -(margin.left)*0.6+15)
          .attr("y", -(margin.top/5.5))
      .text("Male")
  svg
      .append("rect")
          .attr("x", 40)
          .attr("y", -(margin.top/1.5))
          .attr("width", 13)
          .attr("height", 13)
          .style("fill", "#0072BC")
  svg
      .append("text")
          .attr("class", "legend")
          .attr("x", 60)
          .attr("y", -(margin.top/5.5))
      .text("Female")

  })
}
    </script>

<style>
#container {
    display: flex;
    margin-bottom: 50px;
}

#my_dataviz, #viz_container {
    width: 50%;
    margin: 20px;
}


</style>

        </div>
        

        <div class="tab-pane fade" id="task2" role="tabpanel" aria-labelledby="task2-tab"> 
        
          <div class = "container">
            <h1>Fertility</h1>
            <!-- <div id="observablehq-chart-c0e013e6"></div>  -->
            <div>
              <row>
                <button onclick="scatterplotMatrix()">Task 2 P1</button>
                <button onclick="correlationHeatmap()">Task 2 P2</button>
                <button onclick="parallelSets()">Task 2 P3</button>
                <button onclick="education()">Education Attainment</button>
                <button onclick="mortalityRate()">Child Mortality Rate</button>
                <button onclick="laborForce()">Labor Force Participation</button>
                <button onclick="contraceptive()">Modern Contraceptive</button>
              </row>
            </div>
            
            <!-- Create a div where the graph will take place -->
            <div id="my_dataviz"></div>
            
            <!-- <script type="module">
              import {
                Runtime,
                Inspector,
              } from "https://cdn.jsdelivr.net/npm/@observablehq/runtime@5/dist/runtime.js";
              import define from "https://api.observablehq.com/d/a2eb0714a8e5d43c.js?v=4";
              new Runtime().module(define, (name) => {
                if (name === "chart")
                  return new Inspector(
                    document.querySelector("#observablehq-chart-c0e013e6")
                  );
              });
            </script> -->
            
            <script>
              function clearChart() {
                d3.selectAll("svg").remove();
              }
            
              function scatterplotMatrix() {
                clearChart();
                // Define dimensions and margins
                var width = 950,
                  size = 200,
                  padding = 10;
            
                var x = d3.scaleLinear().range([padding / 2, size - padding / 2]);
            
                var y = d3.scaleLinear().range([size - padding / 2, padding / 2]);
            
                var xAxis = d3.axisBottom(x).ticks(5);
            
                var yAxis = d3.axisLeft(y).ticks(5);
            
                d3.csv("data/FINALcombinedData1.csv", function (error, data) {
                  if (error) throw error;
            
                  var traits = d3.keys(data[0]).slice(2, -1); // Exclude the last column
            
                  var color = d3
                    .scaleOrdinal()
                    .domain(["Low", "High"]) // Assuming the labels are "Low" and "High"
                    .range(["blue", "red"]);
            
                  xAxis.tickSize(size * traits.length);
                  yAxis.tickSize(-size * traits.length);
            
                  var brush = d3
                    .brush()
                    .extent([
                      [0, 0],
                      [size, size],
                    ])
                    .on("start", brushstart)
                    .on("brush", brushmove)
                    .on("end", brushend);
            
                  // var marginLeft = 100; // Adjust the desired left margin value
            
                  // var svg = d3
                  //   .select("body")
                  //   .append("svg")
                  //   .attr("width", size * traits.length + 80) // Include the left margin in the SVG width
                  //   .attr("height", size * traits.length + 90)
                  //   .append("g")
                  //   .attr("transform", "translate(" + 80 + "," + 80 / 2 + ")"); // Translate the SVG by the left margin amount
            
                  var margin = { top: 80, right: 50, bottom: 50, left: 80 };
                  var svgWidth = size * traits.length + margin.left + margin.right;
                  var svgHeight = size * traits.length + margin.top + margin.bottom;
            
                  var svg = d3
                    .select("body")
                    .append("svg")
                    .attr("width", svgWidth)
                    .attr("height", svgHeight)
                    .append("g")
                    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");
            
                  // Append graph title
                  svg
                    .append("text")
                    .attr("x", (svgWidth - margin.left - margin.right) / 2)
                    .attr("y", -margin.top / 2)
                    .attr("text-anchor", "middle")
                    .style("font-size", "16px")
                    .text("Scatterplot Matrix: Exploring Relationships between Variables");
            
                  svg
                    .selectAll(".x.axis")
                    .data(traits)
                    .enter()
                    .append("g")
                    .attr("class", "x axis")
                    .attr("transform", function (d, i) {
                      return "translate(" + i * size + ",0)";
                    })
                    .each(function (d) {
                      x.domain(
                        d3.extent(data, function (p) {
                          return p[d];
                        })
                      );
                      d3.select(this).call(xAxis);
            
                      // Append truncated text label for attribute names
                      // Append text label for attribute names
                      d3.select(this)
                        .append("text")
            
                        .attr("class", "axis-label")
                        .attr("x", 7) // Adjust the position of the label along the x-axis
                        .attr("y", -20) // Adjust the position of the label along the y-axis
                        .style("text-anchor", "start")
                        // .text(function (d) {
                        //   return d; // Display full text without truncation
                        // })
                        .text(function (d) {
                          return d.length > 60 ? d.substring(0, 60) + "..." : d;
                        })
                        .style("font-size", "7px"); // Increase font size to 14 pixels
                    });
            
                  svg
                    .selectAll(".y.axis")
                    .data(traits)
                    .enter()
                    .append("g")
                    .attr("class", "y axis")
                    .attr("transform", function (d, i) {
                      return "translate(0," + i * size + ")";
                    })
                    .each(function (d) {
                      y.domain(
                        d3.extent(data, function (p) {
                          return p[d];
                        })
                      );
                      d3.select(this).call(yAxis);
            
                      // Append text label for attribute names
                      // Append truncated text label for attribute names
                      d3.select(this)
                        .append("text")
                        .attr("class", "axis-label")
                        .attr("x", 20) // Adjust the position of the label along the x-axis
                        .attr("y", -75)
                        .attr("dx", "-26.5em")
                        .attr("dy", "1em") // Adjust the vertical alignment
                        .style("text-anchor", "start")
                        .attr("transform", "rotate(-90)") // Rotate the label by -45 degrees
                        .text(function (d) {
                          return d.length > 50 ? d.substring(0, 50) + "..." : d;
                        })
                        // .text(function (d) {
                        //   return d; // Display full text without truncation
                        // })
                        .style("font-size", "8px"); // Increase font size to 14 pixels
                    });
            
                  var cell = svg
                    .selectAll(".cell")
                    .data(cross(traits, traits))
                    .enter()
                    .append("g")
                    .attr("class", "cell")
                    .attr("transform", function (d) {
                      return (
                        "translate(" +
                        (traits.length - d.i - 1) * size +
                        "," +
                        d.j * size +
                        ")"
                      );
                    })
                    .each(plot);
            
                  cell.call(brush);
            
                  function plot(p) {
                    var cell = d3.select(this);
            
                    // Define x and y scales based on the range of data in this cell
                    var xScale = d3
                      .scaleLinear()
                      .domain(
                        d3.extent(data, function (d) {
                          return d[p.x];
                        })
                      )
                      .range([padding, size - padding]);
            
                    var yScale = d3
                      .scaleLinear()
                      .domain(
                        d3.extent(data, function (d) {
                          return d[p.y];
                        })
                      )
                      .range([size - padding, padding]);
            
                    cell
                      .append("rect")
                      .attr("class", "frame")
                      .attr("x", padding / 2)
                      .attr("y", padding / 2)
                      .attr("width", size - padding)
                      .attr("height", size - padding);
            
                    cell
                      .selectAll("circle")
                      .data(data)
                      .enter()
                      .append("circle")
                      .attr("cx", function (d) {
                        return xScale(d[p.x]);
                      })
                      .attr("cy", function (d) {
                        return yScale(d[p.y]);
                      })
                      .attr("r", 4)
                      .style("stroke", "#7abdff")
                      .style("stroke-width", 1)
                      .style("fill", function (d) {
                        // Check the value of the last column and assign colors accordingly
                        if (d[data.columns[data.columns.length - 1]] === "Low") {
                          return "blue";
                        } else if (d[data.columns[data.columns.length - 1]] === "High") {
                          return "red";
                        }
                      });
                  }
            
                  var brushCell;
            
                  // Clear the previously-active brush, if any.
                  function brushstart(p) {
                    if (brushCell !== this) {
                      d3.select(brushCell).call(brush.move, null);
                      x.domain(
                        d3.extent(data, function (d) {
                          return d[p.x];
                        })
                      );
                      y.domain(
                        d3.extent(data, function (d) {
                          return d[p.y];
                        })
                      );
                      brushCell = this;
                    }
                  }
            
                  // Highlight the selected circles.
                  function brushmove(p) {
                    var e = d3.brushSelection(this);
                    svg.selectAll("circle").classed("hidden", function (d) {
                      return (
                        !e ||
                        e[0][0] > x(d[p.x]) ||
                        x(d[p.x]) > e[1][0] ||
                        e[0][1] > y(d[p.y]) ||
                        y(d[p.y]) > e[1][1]
                      );
                    });
                  }
            
                  // If the brush is empty, select all circles.
                  function brushend() {
                    if (!d3.brushSelection(this))
                      svg.selectAll(".hidden").classed("hidden", false);
                  }
                });
            
                function cross(a, b) {
                  var c = [],
                    n = a.length,
                    m = b.length,
                    i,
                    j;
                  for (i = -1; ++i < n; )
                    for (j = -1; ++j < m; ) c.push({ x: a[i], i: i, y: b[j], j: j });
                  return c;
                }
              }
            
              function correlationHeatmap() {
                clearChart();
                // Set the dimensions and margins of the graph
                var margin = { top: 200, right: 50, bottom: 300, left: 420 },
                  width = 1200 - margin.left - margin.right,
                  height = 1200 - margin.top - margin.bottom;
            
                // Append the SVG object to the body of the page
                var svg = d3
                  .select("#my_dataviz")
                  .append("svg")
                  .attr("width", width + margin.left + margin.right)
                  .attr("height", height + margin.top + margin.bottom)
                  .append("g")
                  .attr("transform", "translate(" + margin.left + "," + margin.top + ")");
            
                // Add title
                svg
                  .append("text")
                  .attr("x", width / 2)
                  .attr("y", -150)
                  .attr("text-anchor", "middle")
                  .style("font-size", "24px")
                  .text("Correlation Heatmap"); // Adjust the title text as needed
            
                // Add additional information text
                svg
                  .append("text")
                  .attr("x", width / 2)
                  .attr("y", -120)
                  .attr("text-anchor", "middle")
                  .style("font-size", "12px")
                  .text(
                    "Explore how various factors correlate with fertility rates. Hover over each cell to see correlation values. Correlation is at the bottom left of the graph."
                  );
            
                // Labels of rows and columns
                var myVars = [
                  "Labor force participation rate, female (% of female population ages 15+) (national estimate)",
                  "Fertility rate - Sex: all - Age: all - Variant: estimates_x",
                  "Child mortality rate - Sex: all - Age: 0-4 - Variant: estimates",
                  "Combined - average years of education for 15-64 years female youth and adults",
                  "Contraceptive prevalence, any modern method (% of married women ages 15-49)",
                ];
            
                // Build scales and axes
                var x = d3.scaleBand().range([0, width]).domain(myVars).padding(0.05);
                svg
                  .append("g")
                  .attr("transform", "translate(0," + height + ")")
                  .call(d3.axisBottom(x).tickSize(0))
                  .selectAll("text")
                  .attr("transform", "translate(-10,0)rotate(-45)")
                  .style("text-anchor", "end");
            
                var y = d3.scaleBand().range([height, 0]).domain(myVars).padding(0.05);
                svg.append("g").call(d3.axisLeft(y).tickSize(0));
            
                // Read the data
                d3.csv("data/FINALcombinedData1.csv", function (data) {
                  // Compute the correlation matrix
                  var corrMatrix = computeCorrelationMatrix(data);
            
                  // Define the color scale
                  var colorScale = d3
                    .scaleLinear()
                    .range(["white", "#69b3a2"])
                    .domain([-1, 1]);
            
                  // Draw the heatmap
                  svg
                    .selectAll(".heatmap-rect")
                    .data(corrMatrix)
                    .enter()
                    .append("g")
                    .selectAll(".heatmap-cell")
                    .data(function (d, i) {
                      return d.map((value, j) => ({ value, i, j }));
                    })
                    .enter()
                    .append("rect")
                    .attr("class", "heatmap-cell")
                    .attr("x", function (d) {
                      return x(myVars[d.j]);
                    })
                    .attr("y", function (d) {
                      return y(myVars[d.i]);
                    })
                    .attr("width", x.bandwidth())
                    .attr("height", y.bandwidth())
                    .style("fill", function (d) {
                      return colorScale(d.value);
                    })
                    .on("mouseover", function (d) {
                      tooltip
                        .style("opacity", 1)
                        .style("left", d3.event.pageX + "px")
                        .style("top", d3.event.pageY + "px");
                      tooltip.html("Correlation: " + d.value.toFixed(2));
                    })
                    .on("mousemove", function (d) {
                      tooltip
                        .style("left", d3.event.pageX + "px")
                        .style("top", d3.event.pageY + "px");
                    })
                    .on("mouseout", function (d) {
                      tooltip.style("opacity", 0);
                    });
            
                  // Define legend scale
                  var legendScale = d3
                    .scaleLinear()
                    .domain([0, 1]) // Adjust according to your correlation range
                    .range([0, width]); // Adjust the range to fit within the width of the SVG
            
                  // Create legend axis
                  var legendAxis = d3.axisBottom(legendScale).tickSize(20);
            
                  // Append legend
                  var legend = svg
                    .append("g")
                    .attr("class", "legend")
                    .attr("transform", "translate(0, -60)"); // Adjust the position as needed
            
                  // Draw legend axis
                  legend.call(legendAxis);
            
                  // Add legend title
                  var minCorrelation = d3.min(corrMatrix.flat());
                  var maxCorrelation = d3.max(corrMatrix.flat());
                  legend
                    .append("text")
                    .attr("class", "legend-title")
                    .attr("x", width / 2)
                    .attr("y", -10)
                    .attr("text-anchor", "middle")
                    .text(
                      "Correlation Range: " +
                        minCorrelation.toFixed(2) +
                        " to " +
                        maxCorrelation.toFixed(2)
                    );
            
                  // Create a gradient for the legend
                  var legendGradient = svg
                    .append("defs")
                    .append("linearGradient")
                    .attr("id", "legendGradient")
                    .attr("x1", "0%")
                    .attr("y1", "0%")
                    .attr("x2", "100%")
                    .attr("y2", "0%");
            
                  // Add gradient stops
                  legendGradient
                    .selectAll("stop")
                    .data([
                      { offset: "0%", color: "white" },
                      { offset: "100%", color: "#69b3a2" },
                    ])
                    .enter()
                    .append("stop")
                    .attr("offset", function (d) {
                      return d.offset;
                    })
                    .attr("stop-color", function (d) {
                      return d.color;
                    });
            
                  // Add legend color gradient
                  legend
                    .append("rect")
                    .attr("x", 0)
                    .attr("y", -50) // Adjust the y position as needed
                    .attr("width", width) // Use the width of the SVG
                    .attr("height", 20) // Adjust the height as needed
                    .style("fill", "url(#legendGradient)");
                });
            
                // Function to compute the correlation matrix
                function computeCorrelationMatrix(data) {
                  var corrMatrix = [];
                  for (var i = 0; i < myVars.length; i++) {
                    corrMatrix[i] = [];
                    for (var j = 0; j < myVars.length; j++) {
                      corrMatrix[i][j] = computeCorrelation(data, myVars[i], myVars[j]);
                    }
                  }
                  return corrMatrix;
                }
            
                // Function to compute the correlation coefficient between two variables
                function computeCorrelation(data, var1, var2) {
                  var x = data.map(function (d) {
                    return +d[var1];
                  });
                  var y = data.map(function (d) {
                    return +d[var2];
                  });
                  var xMean = d3.mean(x);
                  var yMean = d3.mean(y);
                  var numerator = d3.sum(
                    x.map(function (d, i) {
                      return (d - xMean) * (y[i] - yMean);
                    })
                  );
                  var denominator = Math.sqrt(
                    d3.sum(
                      x.map(function (d) {
                        return Math.pow(d - xMean, 2);
                      })
                    ) *
                      d3.sum(
                        y.map(function (d) {
                          return Math.pow(d - yMean, 2);
                        })
                      )
                  );
                  return numerator / denominator;
                }
            
                // Tooltip
                var tooltip = d3
                  .select("body")
                  .append("div")
                  .attr("class", "tooltip")
                  .style("opacity", 0);
              }
            
              function parallelSets() {
                clearChart();
                // set the dimensions and margins of the graph
                var margin = { top: 200, right: 100, bottom: 10, left: 50 },
                  width = 1300 - margin.left - margin.right,
                  height = 600 - margin.top - margin.bottom;
            
                // append the svg object to the body of the page
                var svg = d3
                  .select("#my_dataviz")
                  .append("svg")
                  .attr("width", width + margin.left + margin.right)
                  .attr("height", height + margin.top + margin.bottom)
                  .append("g")
                  .attr("transform", "translate(" + margin.left + "," + margin.top + ")");
            
                // Add title
                svg
                  .append("text")
                  .attr("x", width / 2)
                  .attr("y", -100)
                  .attr("text-anchor", "middle")
                  .style("font-size", "24px")
                  .text("Analysis of Factors for Fertility Rate"); // Adjust the title text as needed
            
                // Parse the Data
                d3.csv("data/FINALcombinedData1.csv", function (data) {
                  // Here I set the list of dimension manually to control the order of axis:
                  dimensions = [
                    "Labor force participation rate, female (% of female population ages 15+) (national estimate)",
                    "Child mortality rate - Sex: all - Age: 0-4 - Variant: estimates",
                    "Combined - average years of education for 15-64 years female youth and adults",
                    "Contraceptive prevalence, any modern method (% of married women ages 15-49)",
                    "Fertility rate - Sex: all - Age: all - Variant: estimates_x",
                  ];
            
                  // Calculate the maximum and minimum values for each dimension
                  var minMaxValues = {};
                  dimensions.forEach(function (d) {
                    minMaxValues[d] = d3.extent(data, function (row) {
                      return +row[d];
                    });
                  });
            
                  // For each dimension, I build a linear scale. I store all in a y object
                  var y = {};
                  for (i in dimensions) {
                    name = dimensions[i];
                    y[name] = d3
                      .scaleLinear()
                      .domain(minMaxValues[name]) // Extend the domain to cover the entire range of data values
                      .range([height, 0]);
                  }
            
                  // Build the X scale -> it finds the best position for each Y axis
                  x = d3.scalePoint().range([0, width]).domain(dimensions);
            
                  // The path function takes a row of the csv as input, and return x and y coordinates of the line to draw for this row.
                  function path(d) {
                    return d3.line()(
                      dimensions.map(function (p) {
                        return [x(p), y[p](d[p])];
                      })
                    );
                  }
            
                  // Draw the lines
                  svg
                    .selectAll("myPath")
                    .data(data)
                    .enter()
                    .append("path")
                    .attr("class", "line") // 2 class for each line: 'line' and the group name
                    .attr("d", path)
                    .style("fill", "none")
                    .style("stroke", function (d) {
                      // Color based on the value of 'Level of Fertility'
                      if (d["Level of Fertility"] === "Low") {
                        return "blue";
                      } else if (d["Level of Fertility"] === "High") {
                        return "red";
                      } else {
                        return "steelblue"; // Default color if neither 'Low' nor 'High'
                      }
                    })
                    .style("opacity", 0.5);
            
                  // Draw the axis:
                  svg
                    .selectAll("myAxis")
                    // For each dimension of the dataset I add a 'g' element:
                    .data(dimensions)
                    .enter()
                    .append("g")
                    .attr("class", "axis")
                    // I translate this element to its right position on the x axis
                    .attr("transform", function (d) {
                      return "translate(" + x(d) + ",0)";
                    })
                    // And I build the axis with the call function
                    .each(function (d) {
                      d3.select(this).call(d3.axisLeft().ticks(5).scale(y[d]));
                    })
                    // Add axis title
                    .append("text")
                    .style("text-anchor", "start")
                    .attr("y", -9)
                    // .attr("transform", "rotate(-45)")
                    .text(function (d) {
                      // Shorten the dimension label to the first 30 characters
                      return d.length > 30 ? d.substring(0, 30) + "..." : d;
                    })
                    .style("fill", "black");
                });
              }
            
              function education() {
                clearChart();
                // Set up dimensions for the plot
                var margin = { top: 50, right: 30, bottom: 100, left: 100 },
                  width = 700 - margin.left - margin.right,
                  height = 700 - margin.top - margin.bottom;
            
                // Append the SVG object to the body of the page
                var svg = d3
                  .select("body")
                  .append("svg")
                  .attr("width", width + margin.left + margin.right)
                  .attr("height", height + margin.top + margin.bottom)
                  .append("g")
                  .attr("transform", "translate(" + margin.left + "," + margin.top + ")");
            
                // Append graph title
                svg
                  .append("text")
                  .attr("x", 250)
                  .attr("y", -20)
                  .attr("text-anchor", "middle")
                  .style("font-size", "16px")
                  .text(
                    "Scatterplot: Exploring Relationships between Education Attainment in Women and Fertility Rate"
                  );
            
                // Load data
                d3.csv("data/FINALcombinedData1.csv", function (data) {
                  // Add X axis
                  var x = d3
                    .scaleLinear()
                    .domain([
                      0,
                      d3.max(data, function (d) {
                        return +d[
                          "Fertility rate - Sex: all - Age: all - Variant: estimates_x"
                        ];
                      }),
                    ])
                    .range([0, width]);
                  svg
                    .append("g")
                    .attr("transform", "translate(0," + height + ")")
                    .call(d3.axisBottom(x));
            
                  // X axis label
                  svg
                    .append("text")
                    .attr("text-anchor", "middle")
                    .attr("x", 280)
                    .attr("y", 600)
                    .text("Fertility Rate");
            
                  // Add Y axis
                  var y = d3
                    .scaleLinear()
                    .domain([
                      0,
                      d3.max(data, function (d) {
                        return +d[
                          "Combined - average years of education for 15-64 years female youth and adults"
                        ];
                      }),
                    ])
                    .range([height, 0]);
                  svg.append("g").call(d3.axisLeft(y));
            
                  // Y axis label
                  svg
                    .append("text")
                    .attr("text-anchor", "end")
                    .attr("transform", "rotate(-90)")
                    .attr("y", -40)
                    .attr("x", -130)
                    .text(
                      "Average years of education for 15-64 years female youth and adults"
                    );
            
                  // Add dots
                  svg
                    .append("g")
                    .selectAll("dot")
                    .data(data)
                    .enter()
                    .append("circle")
                    .attr("cx", function (d) {
                      return x(
                        d["Fertility rate - Sex: all - Age: all - Variant: estimates_x"]
                      );
                    })
                    .attr("cy", function (d) {
                      return y(
                        d[
                          "Combined - average years of education for 15-64 years female youth and adults"
                        ]
                      );
                    })
                    .attr("r", 5)
                    .style("fill", "#69b3a2");
                });
              }
            
              function mortalityRate() {
                clearChart();
                // Set up dimensions for the plot
                var margin = { top: 50, right: 30, bottom: 100, left: 100 },
                  width = 700 - margin.left - margin.right,
                  height = 700 - margin.top - margin.bottom;
            
                // Append the SVG object to the body of the page
                var svg = d3
                  .select("body")
                  .append("svg")
                  .attr("width", width + margin.left + margin.right)
                  .attr("height", height + margin.top + margin.bottom)
                  .append("g")
                  .attr("transform", "translate(" + margin.left + "," + margin.top + ")");
            
                // Append graph title
                svg
                  .append("text")
                  .attr("x", 250)
                  .attr("y", -20)
                  .attr("text-anchor", "middle")
                  .style("font-size", "16px")
                  .text(
                    "Scatterplot: Exploring Relationships between Child Mortality Rate and Fertility Rate"
                  );
            
                // Load data
                d3.csv("data/FINALcombinedData1.csv", function (data) {
                  // Add X axis
                  var x = d3
                    .scaleLinear()
                    .domain([
                      0,
                      d3.max(data, function (d) {
                        return +d[
                          "Fertility rate - Sex: all - Age: all - Variant: estimates_x"
                        ];
                      }),
                    ])
                    .range([0, width]);
                  svg
                    .append("g")
                    .attr("transform", "translate(0," + height + ")")
                    .call(d3.axisBottom(x));
            
                  // X axis label
                  svg
                    .append("text")
                    .attr("text-anchor", "middle")
                    .attr("x", 280)
                    .attr("y", 600)
                    .text("Fertility Rate");
            
                  // Add Y axis
                  var y = d3
                    .scaleLinear()
                    .domain([
                      0,
                      d3.max(data, function (d) {
                        return +d[
                          "Child mortality rate - Sex: all - Age: 0-4 - Variant: estimates"
                        ];
                      }),
                    ])
                    .range([height, 0]);
                  svg.append("g").call(d3.axisLeft(y));
            
                  // Y axis label
                  svg
                    .append("text")
                    .attr("text-anchor", "end")
                    .attr("transform", "rotate(-90)")
                    .attr("y", -40)
                    .attr("x", -130)
                    .text("Child Mortality Rate");
            
                  // Add dots
                  svg
                    .append("g")
                    .selectAll("dot")
                    .data(data)
                    .enter()
                    .append("circle")
                    .attr("cx", function (d) {
                      return x(
                        d["Fertility rate - Sex: all - Age: all - Variant: estimates_x"]
                      );
                    })
                    .attr("cy", function (d) {
                      return y(
                        d["Child mortality rate - Sex: all - Age: 0-4 - Variant: estimates"]
                      );
                    })
                    .attr("r", 5)
                    .style("fill", "#69b3a2");
                });
              }
            
              function laborForce() {
                clearChart();
                // Set up dimensions for the plot
                var margin = { top: 50, right: 30, bottom: 100, left: 100 },
                  width = 700 - margin.left - margin.right,
                  height = 700 - margin.top - margin.bottom;
            
                // Append the SVG object to the body of the page
                var svg = d3
                  .select("body")
                  .append("svg")
                  .attr("width", width + margin.left + margin.right)
                  .attr("height", height + margin.top + margin.bottom)
                  .append("g")
                  .attr("transform", "translate(" + margin.left + "," + margin.top + ")");
            
                // Append graph title
                svg
                  .append("text")
                  .attr("x", 250)
                  .attr("y", -20)
                  .attr("text-anchor", "middle")
                  .style("font-size", "16px")
                  .text(
                    "Scatterplot: Exploring Relationships between Labor Force Participation Rate and Fertility Rate"
                  );
            
                // Load data
                d3.csv("data/FINALcombinedData1.csv", function (data) {
                  // Add X axis
                  var x = d3
                    .scaleLinear()
                    .domain([
                      0,
                      d3.max(data, function (d) {
                        return +d[
                          "Fertility rate - Sex: all - Age: all - Variant: estimates_x"
                        ];
                      }),
                    ])
                    .range([0, width]);
                  svg
                    .append("g")
                    .attr("transform", "translate(0," + height + ")")
                    .call(d3.axisBottom(x));
            
                  // X axis label
                  svg
                    .append("text")
                    .attr("text-anchor", "middle")
                    .attr("x", 280)
                    .attr("y", 600)
                    .text("Fertility Rate");
            
                  // Add Y axis
                  var y = d3
                    .scaleLinear()
                    .domain([
                      0,
                      d3.max(data, function (d) {
                        return +d[
                          "Labor force participation rate, female (% of female population ages 15+) (national estimate)"
                        ];
                      }),
                    ])
                    .range([height, 0]);
                  svg.append("g").call(d3.axisLeft(y));
            
                  // Y axis label
                  svg
                    .append("text")
                    .attr("text-anchor", "end")
                    .attr("transform", "rotate(-90)")
                    .attr("y", -40)
                    .attr("x", -130)
                    .text("Labor Force Participation Rate");
            
                  // Add dots
                  svg
                    .append("g")
                    .selectAll("dot")
                    .data(data)
                    .enter()
                    .append("circle")
                    .attr("cx", function (d) {
                      return x(
                        d["Fertility rate - Sex: all - Age: all - Variant: estimates_x"]
                      );
                    })
                    .attr("cy", function (d) {
                      return y(
                        d[
                          "Labor force participation rate, female (% of female population ages 15+) (national estimate)"
                        ]
                      );
                    })
                    .attr("r", 5)
                    .style("fill", "#69b3a2");
                });
              }
            
              function contraceptive() {
                clearChart();
                // Set up dimensions for the plot
                var margin = { top: 50, right: 30, bottom: 100, left: 100 },
                  width = 700 - margin.left - margin.right,
                  height = 700 - margin.top - margin.bottom;
            
                // Append the SVG object to the body of the page
                var svg = d3
                  .select("body")
                  .append("svg")
                  .attr("width", width + margin.left + margin.right)
                  .attr("height", height + margin.top + margin.bottom)
                  .append("g")
                  .attr("transform", "translate(" + margin.left + "," + margin.top + ")");
            
                // Append graph title
                svg
                  .append("text")
                  .attr("x", 250)
                  .attr("y", -20)
                  .attr("text-anchor", "middle")
                  .style("font-size", "16px")
                  .text(
                    "Scatterplot: Exploring Relationships between Contraceptive Prevalence and Fertility Rate"
                  );
            
                // Load data
                d3.csv("data/FINALcombinedData1.csv", function (data) {
                  // Add X axis
                  var x = d3
                    .scaleLinear()
                    .domain([
                      0,
                      d3.max(data, function (d) {
                        return +d[
                          "Fertility rate - Sex: all - Age: all - Variant: estimates_x"
                        ];
                      }),
                    ])
                    .range([0, width]);
                  svg
                    .append("g")
                    .attr("transform", "translate(0," + height + ")")
                    .call(d3.axisBottom(x));
            
                  // X axis label
                  svg
                    .append("text")
                    .attr("text-anchor", "middle")
                    .attr("x", 280)
                    .attr("y", 600)
                    .text("Fertility Rate");
            
                  // Add Y axis
                  var y = d3
                    .scaleLinear()
                    .domain([
                      0,
                      d3.max(data, function (d) {
                        return +d[
                          "Contraceptive prevalence, any modern method (% of married women ages 15-49)"
                        ];
                      }),
                    ])
                    .range([height, 0]);
                  svg.append("g").call(d3.axisLeft(y));
            
                  // Y axis label
                  svg
                    .append("text")
                    .attr("text-anchor", "end")
                    .attr("transform", "rotate(-90)")
                    .attr("y", -40)
                    .attr("x", -130)
                    .text("Contraceptive prevalence");
            
                  // Add dots
                  svg
                    .append("g")
                    .selectAll("dot")
                    .data(data)
                    .enter()
                    .append("circle")
                    .attr("cx", function (d) {
                      return x(
                        d["Fertility rate - Sex: all - Age: all - Variant: estimates_x"]
                      );
                    })
                    .attr("cy", function (d) {
                      return y(
                        d[
                          "Contraceptive prevalence, any modern method (% of married women ages 15-49)"
                        ]
                      );
                    })
                    .attr("r", 5)
                    .style("fill", "#69b3a2");
                });
              }
            </script>
            

          </div> 
        </div>
        <div class="tab-pane fade" id="task3" role="tabpanel" aria-labelledby="task3-tab">
            <!-- Task 3 -->
            
            <div class="container mt-4">
    <div class="row align-items-center">
        
        <div class="col">
            <h6 class="pb-2 text-center">Consequences of Low or High Ferility Rates</h6>
        </div>
    </div>

    <ul class="nav nav-tabs justify-content-center py-3" id="myTab" role="tablist">
      <li class="nav-item" role="presentation">
        <button class="nav-link active" id="demo-tab" data-bs-toggle="tab" data-bs-target="#demo" type="button" role="tab" aria-controls="demo" aria-selected="true">Demographic</button>
      </li>
      <li class="nav-item" role="presentation">
        <button class="nav-link" id="eco-tab" data-bs-toggle="tab" data-bs-target="#eco" type="button" role="tab" aria-controls="eco" aria-selected="false">Economic</button>
      </li>
      <li class="nav-item" role="presentation">
        <button class="nav-link" id="health-tab" data-bs-toggle="tab" data-bs-target="#health" type="button" role="tab" aria-controls="health" aria-selected="false">Healthcare</button>
      </li>
      <li class="nav-item" role="presentation">
        <button class="nav-link" id="edu-tab" data-bs-toggle="tab" data-bs-target="#edu" type="button" role="tab" aria-controls="edu" aria-selected="false">Education</button>
      </li>
    </ul>
    

    <div class="tab-content py-4" id="myTabContent">
      <div class="tab-pane fade show active" id="demo" role="tabpanel" aria-labelledby="demo-tab">
          <div class = "container">
            <table class="table table-striped">
              <thead>
                <tr>
                  <th colspan="2" class="colspan-2 bg-dark text-white text-center" align="center">Consequence Type</th> <!-- Use Bootstrap class to span two columns -->
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td colspan="2" align="center">Population Growth</td>
                 
                </tr>
                <tr>
                  <td class = "col-auto" align="right"><p align="right">Global</p><div id="observablehq-popgrowth-de478a60">Global</div></td>
                  <td class = "col-auto" align="left"><p align="left">Singapore</p><div id="observablehq-PopulationGrowth-de478a60"></div></td>
                </tr>
              
              </tbody>
            </table>
          </div> 
      </div>

      <div class="tab-pane fade" id="eco" role="tabpanel" aria-labelledby="eco-tab"> 
      
        <div class = "container">
          <table class="table table-striped">
            <thead>
              <tr>
                <th colspan="2" class="colspan-2 bg-dark text-white text-center" align="center">Consequence Type</th> <!-- Use Bootstrap class to span two columns -->
              </tr>
            </thead>
            <tbody>
              <tr>
                <td colspan="2" align="center">Labor Force Participation</td>
              </tr>
              <tr>
                <td class = "col-auto" align="right"><p align="right">Global</p><div id="observablehq-laborforcepop-de478a60"></div></td>
                <td class = "col-auto" align="left"><p align="left">Singapore</p><div id="observablehq-LabourForce1-de478a60"></div></td>
              </tr>

              <tr>
                <td colspan="2" align="center">Tax Revenue</td>
               
              </tr>
              <tr>
                <td class = "col-auto" align="right"><p align="right">Global</p><div id="observablehq-taxrevenue-de478a60"></div></td>
                <td class = "col-auto" align="left"><p align="left">Singapore</p><div id="observablehq-TaxRevenue-de478a60"></div></td>
              </tr>     
            </tbody>
          </table>
        </div>
      </div>

      <div class="tab-pane fade" id="health" role="tabpanel" aria-labelledby="heath-tab">
        <div class = "container">
          <table class="table table-striped">
            <thead>
              <tr>
                <th colspan="2" class="colspan-2 bg-dark text-white text-center" align="center">Consequence Type</th> <!-- Use Bootstrap class to span two columns -->
              </tr>
            </thead>
            <tbody>
              <tr>
                <td colspan="2" align="center">Healthcare Expenditure</td>
               
              </tr>
              <tr>
                <td class = "col-auto" align="right"><p align="right">Global</p><div id="observablehq-healthexp-de478a60"></div></td>
                <td class = "col-auto" align="left"><p align="left">Singapore</p><div id="observablehq-Health-de478a60"></div></td>
              </tr>

              <tr>
                <td colspan="2" align="center">Number of Long Term care Facilities</td>
               
              </tr>
              <tr>
                <td class = "col-auto" align="right"><p align="right">Global</p><div id="observablehq-elderlybeds-de478a60"></div></td>
                <td class = "col-auto" align="left"><p align="left">Singapore</p><div id="observablehq-LongTermCareFacilities-de478a60"></div></td>
              </tr>


            
            </tbody>
          </table>
        </div>
      </div>

      <div class="tab-pane fade" id="edu" role="tabpanel" aria-labelledby="edu-tab">
        <div class = "container">
          <table class="table table-striped">
            <thead>
              <tr>
                <th colspan="2" class="colspan-2 bg-dark text-white text-center" align="center">Consequence Type</th> <!-- Use Bootstrap class to span two columns -->
              </tr>
            </thead>
            <tbody>
              <tr>
                <td colspan="2" align="center">Education Expenditure</td>
               
              </tr>
              <tr>
                <td class = "col-auto" align="right"><p align="right">Global</p><div id="observablehq-eduexp-de478a60"></div></td>
                <td class = "col-auto" align="left"><p align="left">Singapore</p><div id="observablehq-EducationExpenditure-de478a60"></div></td>
              </tr>

            </tbody>
          </table>
        </div>
      </div>
  </div>
  <div class = "container">
    <table class="table table-striped">
      <thead>
        <tr>
          <th colspan="2" class="colspan-2 bg-dark text-white text-center" align="center">Fertility Rate's Consequences Data Distribution</th> <!-- Use Bootstrap class to span two columns -->
        </tr>
      </thead>
      <tbody>
        <tr>
          <td colspan="2" align="center">Singapore</td>
        </tr>
        <tr>
          <td class="text-center" colspan="2">
            <iframe width="100%" height="684" frameborder="0"
            src="https://observablehq.com/embed/15a93d12bc305b49@491?cells=chart&api_key=8583f615a513ebb83c43af422650d1c41631515a"></iframe>
          </td>
        </tr>
        <tr>
          <td colspan="2" align="center">Global</td>
        </tr>
        <tr>
          <td class="text-center" colspan="2">
            <iframe width="100%" height="684" frameborder="0"
            src="https://observablehq.com/embed/45379202fe5b6ea0@524?cells=chart&api_key=d1ebdddac6d54d3ae06937ad68e9706bfdd834c9"></iframe>
          </td>
        </tr>     
      </tbody>
    </table>
  </div>
  </div>
        </div>

    </div>
  
    </div>
  </div>
  
    
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@observablehq/inspector@5/dist/inspector.css">
  <script type="module">
  import {Runtime, Inspector} from "https://cdn.jsdelivr.net/npm/@observablehq/runtime@5/dist/runtime.js";
  import define from "https://api.observablehq.com/d/e005568a85810417@229.js?v=4";
  new Runtime().module(define, name => {
    if (name === "popgrowth") return new Inspector(document.querySelector("#observablehq-popgrowth-de478a60"));
    if (name === "wprkingage") return new Inspector(document.querySelector("#observablehq-wprkingage-de478a60"));
    if (name === "laborforcepop") return new Inspector(document.querySelector("#observablehq-laborforcepop-de478a60"));
    if (name === "eduexp") return new Inspector(document.querySelector("#observablehq-eduexp-de478a60"));
    if (name === "teacherpupil") return new Inspector(document.querySelector("#observablehq-teacherpupil-de478a60"));
    if (name === "elderlybeds") return new Inspector(document.querySelector("#observablehq-elderlybeds-de478a60"));
    if (name === "healthexp") return new Inspector(document.querySelector("#observablehq-healthexp-de478a60"));
    if (name === "taxrevenue") return new Inspector(document.querySelector("#observablehq-taxrevenue-de478a60"));
  });
  </script>
  <!-- Local scatterplots -->
  <div class = "hideplots d-none">
    <!-- Global scatterplots -->
    <div id="observablehq-popgrowth-de478a60"></div>
    <div id="observablehq-wprkingage-de478a60"></div>
    <div id="observablehq-laborforcepop-de478a60"></div>
    <div id="observablehq-eduexp-de478a60"></div>
    <div id="observablehq-teacherpupil-de478a60"></div>
    <div id="observablehq-elderlybeds-de478a60"></div>
    <div id="observablehq-healthexp-de478a60"></div>
    <div id="observablehq-taxrevenue-de478a60"></div>

      <!-- Local scatterplots -->
    <div id="observablehq-Secondary_School-de478a60"></div>
    <div id="observablehq-Primary_School-de478a60"></div>
    <div id="observablehq-TaxRevenue-de478a60"></div>
    <div id="observablehq-TotalEmployed-de478a60"></div>
    <div id="observablehq-TotalUnemployed-de478a60"></div>
    <div id="observablehq-TotalUnemploymentRate-de478a60"></div>
    <div id="observablehq-ResidentUnemploymentRate1-de478a60"></div>
    <div id="observablehq-LabourForce1-de478a60"></div>
    <div id="observablehq-LongTermCareFacilities-de478a60"></div>
    <div id="observablehq-EducationExpenditure-de478a60"></div>
    <div id="observablehq-Health-de478a60"></div>
  </div>
  
  
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@observablehq/inspector@5/dist/inspector.css">
  <script type="module">
  import {Runtime, Inspector} from "https://cdn.jsdelivr.net/npm/@observablehq/runtime@5/dist/runtime.js";
  import define from "https://api.observablehq.com/d/e005568a85810417@229.js?v=4";
  new Runtime().module(define, name => {
    if (name === "Secondary_School") return new Inspector(document.querySelector("#observablehq-Secondary_School-de478a60"));
    if (name === "Primary_School") return new Inspector(document.querySelector("#observablehq-Primary_School-de478a60"));
    if (name === "TaxRevenue") return new Inspector(document.querySelector("#observablehq-TaxRevenue-de478a60"));
    if (name === "TotalEmployed") return new Inspector(document.querySelector("#observablehq-TotalEmployed-de478a60"));
    if (name === "TotalUnemployed") return new Inspector(document.querySelector("#observablehq-TotalUnemployed-de478a60"));
    if (name === "TotalUnemploymentRate") return new Inspector(document.querySelector("#observablehq-TotalUnemploymentRate-de478a60"));
    if (name === "ResidentUnemploymentRate1") return new Inspector(document.querySelector("#observablehq-ResidentUnemploymentRate1-de478a60"));
    if (name === "LabourForce1") return new Inspector(document.querySelector("#observablehq-LabourForce1-de478a60"));
    if (name === "LongTermCareFacilities") return new Inspector(document.querySelector("#observablehq-LongTermCareFacilities-de478a60"));
    if (name === "EducationExpenditure") return new Inspector(document.querySelector("#observablehq-EducationExpenditure-de478a60"));
    if (name === "Health") return new Inspector(document.querySelector("#observablehq-Health-de478a60"));
    if (name === "PopulationGrowth") return new Inspector(document.querySelector("#observablehq-PopulationGrowth-de478a60"));
  });
  </script>



  <!-- Task 1 Chart --> 
  <script src="https://d3js.org/d3.v4.js"></script>

  <!-- Scripts -->
  <!-- Bootstrap core JavaScript -->
  <script src="vendor/jquery/jquery.min.js"></script>
  <script src="vendor/bootstrap/js/bootstrap.min.js"></script>

  <script src="assets/js/isotope.min.js"></script>
  <script src="assets/js/owl-carousel.js"></script>
  <script src="assets/js/tabs.js"></script>
  <script src="assets/js/popup.js"></script>
  <script src="assets/js/custom.js"></script>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-/bQdsTh/da6pkI1MST/rWKFNjaCP5gBSY4sEBT38Q/9RBh9AH40zEOg7Hlq2THRZ" crossorigin="anonymous"></script>

    <!-- Option 2: Separate Popper and Bootstrap JS -->
    <!--
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js" integrity="sha384-W8fXfP3gkOKtndU4JGtKDvXbO53Wy8SZCQHczT5FMiiqmQfUpWbYdTil/SxwZgAN" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.min.js" integrity="sha384-skAcpIdS7UcVUC05LJ9Dxay8AXcDYfBJqt1CJ85S/CFujBsIzCIv+l9liuYLaMQ/" crossorigin="anonymous"></script>
    -->

    <!-- <DO NOT TOUCH> -->
    <!-- Axios -->
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <!-- Vue 3 -->
    <script src="https://unpkg.com/vue@next"></script>
    <!-- JS -->
    <script src="js/home_nav.js"></script>
    <script src="js/map.js"></script>

</body>

</html>