<!-- python3 -m http.server 8001  -->
<!DOCTYPE html>
<html lang="en">

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;500;600;700;800&display=swap"
    rel="stylesheet">

  <title>Family Planning User Flow</title>

  <!-- Bootstrap core CSS -->
  <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">


  <!-- Additional CSS Files -->
  <link rel="stylesheet" href="assets/css/fontawesome.css">
  <link rel="stylesheet" href="assets/css/templatemo-tale-seo-agency.css">
  <link rel="stylesheet" href="assets/css/owl.css">
  <link rel="stylesheet" href="assets/css/animate.css">
  <link rel="stylesheet" href="https://unpkg.com/swiper@7/swiper-bundle.min.css" />
<!-- Load d3.js -->
<script src="https://d3js.org/d3.v4.js"></script>
<link
  rel="stylesheet"
  href="https://cdn.jsdelivr.net/npm/@observablehq/inspector@5/dist/inspector.css"
/>

<style>
  svg {
    font: 10px sans-serif;
    padding: 10px;
  }

  .axis,
  .frame {
    shape-rendering: crispEdges;
  }

  .axis line {
    stroke: #ddd;
  }

  .axis path {
    display: none;
  }

  .cell text {
    font-weight: bold;
    text-transform: capitalize;
  }

  .frame {
    fill: none;
    stroke: #aaa;
  }

  circle {
    fill-opacity: 0.7;
  }

  circle.hidden {
    fill: #ccc !important;
  }

  .extent {
    fill: #000;
    fill-opacity: 0.125;
    stroke: #fff;
  }

  .axis-label {
    font-size: 12px; /* Adjust font size as needed */
    fill: black; /* Color of the axis labels */
  }
</style>

<style>
  .header-area {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    z-index: 1000; /* Ensure the navbar is on top of other content */
  }
    /* Style for showing hidden paragraphs */
    .hidden-paragraph {
        display: none;
    }

    .hidden-paragraph.show {
        display: block;
    }


</style>
</head>

<body>


  <!-- ***** Header Area Start ***** -->
  <header class="header-area header-sticky">
    <div class="container">
      <div class="row">
        <div class="col-md-2 mx-0"> <!-- Adjust the column width as needed -->
          <nav class="main-nav">
            <!-- ***** Menu Start ***** -->
            <ul class="nav flex-column"> <!-- Utilizing Bootstrap's flex-column class to align the tabs vertically -->
              <li class="scroll-to-section"><a href="#top" class="active">Build</a></li>
              <li class="scroll-to-section"><a href="#services">Reasons</a></li>
              <li class="scroll-to-section"><a href="#projects">Consequences</a></li>
                  <li><a href="charts.html">Charts</a></li>
              </li>
            </ul>
            <a class='menu-trigger'>
              <span>Menu</span>
            </a>
            <!-- ***** Menu End ***** -->
          </nav>
        </div>
      </div>
    </div>
  </header>
  
  
  
  <!-- ***** Header Area End ***** -->

  <div class="main-banner" id="top">
    <div class="container">
      <div class="row">
        <div class="col-lg-7">
          <div class="caption header-text">
            <h6>IS428 G3</h6>
            <div class="line-dec"></div>
            <h4>Build <em>your</em> Ideal <span>Family</span></h4>
            <p>How many children would you like to have in your family?</p>
            <div class="main-button scroll-to-section"><a href="#" onclick="showStatement(0)">0</a></div>
            <span> </span>
            <div class="second-button"><a href="#" onclick="showStatement(1)">1</a></div>
            <span> </span>
            <div class="main-button scroll-to-section"><a href="#" onclick="showStatement(2)">2</a></div>
            <span> </span>
            <div class="second-button"><a href="#" onclick="showStatement(3)">3</a></div>
            <span> </span>
            <div class="main-button scroll-to-section"><a href="#" onclick="showStatement(4)">4</a></div>
            <div id="revised-statement" style="display:none;">
              <p>Your choice of having <span id="selectedNumberPlaceholder"></span> children reflects a trend seen in Singapore's declining total fertility rate, 
                which reached an <b>all-time low of 0.97 in 2023</b>. Typically, sustaining a population 
                requires an <b>average of 2.1 children per woman</b>. Your insights on the next question could 
                help Singapore's government address this fertility decline.</p>
          </div>
          <div id="revised-statement1" style="display:none;">
            <p>Your choice of having <span id="selectedNumberPlaceholder1"></span> reflects a trend <b>contrary</b> to Singapore's declining total fertility rate, 
              which reached an <b>all-time low of 0.97 in 2023</b>. Your choice aligns with the ideal rate to sustain a generation, 
              as it requires an <b>average of 2.1 children per woman for population stability</b>.</p>
        </div>
        </div>
      </div>
    </div>
  </div>

  <div class="services section" id="services">
    <div class="container">
      <div class="row">
        
          <div class="row">
            <div class="col-lg-12">
              <div class="section-heading">
                <h2>What's your reasons behind this decision?
                </h2>
                <div class="line-dec"></div>
                <p>Select your reason</p>
              </div>
            </div>
            
            <div class="col-lg-6 col-sm-6">
              <div class="service-item">
                <div class="icon">
                  <img src="assets/images/services-01.jpg" alt="discover SEO" class="templatemo-feature">
                </div>
                <h4>Awareness of Childbearing Opportunity Costs</h4>
                <p>Understanding the opportunity costs of having children</p>
                <h4 id="education-button" class="main-button scroll-to-section"" onclick="clearChart()">Select</h4>
                <br><h4 class="main-button scroll-to-section" onclick="education()">Show Scatterplot Chart</h4>
                <div id="my_dataviz"></div>
                <h10 id="education-paragraph" class="hidden-paragraph"><b>Your choice to opt for a low number of children (low fertility rate) aligns with the trend seen in people with higher levels of education.</b>
                  This choice is closely associated with increased awareness and access to birth control methods, allowing for better control over fertility rates. 
                  Moreover, it often postpones marriage due to career pursuits, reducing the number of 
                  childbearing years and consequently impacting fertility rates negatively.</h10>
                <h10 id="ideal-education-paragraph" class="hidden-paragraph"><b>Your choice to opt for a high number of children (high fertility rate) aligns with the trend seen in people with lower levels of education.1`</b>
                  Lower levels of education often mean less awareness about and limited access to birth control methods,
                  which can result in a more ideal fertility rates.</h10>
              </div>
            </div>
            <div class="col-lg-6 col-sm-6">
              <div class="service-item">
                <div class="icon">
                  <img src="assets/images/services-02.jpg" alt="data analysis" class="templatemo-feature">
                </div>
                <h4>Commitment to Work</h4>
                <p>Increased workload and stress from job responsibilities</p>
                <h4 id="work-button" class="main-button scroll-to-section" onclick="clearChart()" >Select</h4>
                <br><h4 class="main-button scroll-to-section" onclick="laborForce()">Show Scatterplot Chart</h4>
                <div id="my_dataviz1"></div>
                <h10 id="work-paragraph" class="hidden-paragraph">
                  <b>Your choice to opt for a low number of children (a low fertility rate) aligns with the trend seen among individuals participating in the laborforce.</b> As women become more engaged in employment, they tend to prefer having fewer children due 
                  to the increasing costs associated with balancing work and childcare responsibilities.</h10>
                <h10 id="ideal-work-paragraph" class="hidden-paragraph"><b>Your choice to opt for a high number of children (high fertility rate) aligns with individuals who are not extensively engaged in the workforce.</b> As labor force participation decreases, 
                  some may prioritize larger families, viewing them as central to their lifestyle and identity.</h10>
              </div>
            </div>
            <div class="col-lg-6 col-sm-6">
              <div class="service-item">
                <div class="icon">
                  <img src="assets/images/services-03.jpg" alt="precise data" class="templatemo-feature">
                </div>
                <h4>Use of contraceptives</h4>
                <p>Personal reasons hinder access to contraception</p>
                <h4 id="contraceptives-button" class="main-button scroll-to-section" onclick="clearChart()">Select</h4>
                <br><h4 class="main-button scroll-to-section" onclick="contraceptive()">Show Scatterplot Chart</h4>
                <div id="my_dataviz2"></div>
                <h10 id="ideal-contraceptives-paragraph" class="hidden-paragraph"><b>Your choice to opt for a high number of children, (a high fertility rate) aligns with the trend seen in developed countries.</b> Misconceptions in developing countries about contraceptives harming women's health lead to low usage, increasing unintended pregnancies and high fertility rates.</h10>
                  <h10 id="contraceptives-paragraph" class="hidden-paragraph"><b>Your choice to opt for a low number of children (a low fertility rate) aligns with the trend seen in developed countries.</b>
                  They prioritize widespread contraceptive education, resulting in higher contraceptive usage and consequently lower fertility rates. </h10>
              </div>
            </div>
            <div class="col-lg-6 col-sm-6">
              <div class="service-item">
                <div class="icon">
                  <img src="assets/images/services-04.jpg" alt="SEO marketing" class="templatemo-feature">
                </div>
                <h4>Factors affecting my children's lifespan</h4>
                <p>Concerns regarding the potential impacts of environmental or genetic factors on my children's lifespan</p>
                <h4 id="lifespan-button" class="main-button scroll-to-section" onclick="clearChart()">Select</h4>
                <br><h4 class="main-button scroll-to-section" onclick="mortalityRate()">Show Scatterplot Chart</h4>
                <div id="my_dataviz3"></div>
                  <h10 id="lifespan-paragraph" class="hidden-paragraph"><b>Your choice to opt for a low number of children (a low fertility rate) aligns with the trend observed in regions with low child mortality rates</b>. As child mortality rates decline, parents gain confidence in the survival of their children. 
                    Consequently, there's less pressure to have additional children, resulting in lower fertility rates. </h10>
                  <h10 id="ideal-lifespan-paragraph" class="hidden-paragraph"><b>Your decision to opt for a high number of children (high fertility rate) aligns with the Replacement Effect of Infant Mortality</b>, which highlights how high infant mortality rates in some nations drive a desire for larger families. 
                    In response, families often have more children to offset mortality, ultimately leading to a higher and a more ideal fertility rates </h10>
              </div>
            </div>
          </div>
        
      </div>
    </div>
  </div>


  <div class="projects section" id="projects">
    <div class="container">
      <div class="row">
        <div class="col-lg-6">
          <div class="section-heading">
            <h2>On a larger scale (country level), how would your decision affect your country?</h2>
            <div class="line-dec"></div>
            <select id="selectButtonConsequences">
              <option value="demographics"> Demographic </option>
              <option value="economics"> Economics </option>
              <option value="healthcare"> Healthcare </option>
              <option value="education"> Education </option>
            </select>
            <div id="whatIfBarGraph"></div>
           
            
          </div>
        </div>
      </div>
    </div>
   
  </div>

  <!-- Scripts -->
  <script> 
    var selectedNumber = 0;
    var selectedNumberWhatIfGraph = 0;

    
    plotWhatIfGraphs("demographics")


    d3.select("#selectButtonConsequences").on("change", function(d) {
      var selectedOption = d3.select(this).property("value")
      plotWhatIfGraphs(selectedOption)
      
  })

    function showStatement(number) {
      var dropdown = d3.select("#selectButtonConsequences");
      dropdown.property("value", "demographics");

      selectedNumberWhatIfGraph = number
      plotWhatIfGraphs("demographics")
      selectedNumber = number;
      var selectedNumberPlaceholder = document.getElementById('selectedNumberPlaceholder');
      var selectedNumberPlaceholder1 = document.getElementById('selectedNumberPlaceholder1')
      selectedNumberPlaceholder.textContent = selectedNumber;
      if (parseInt(selectedNumber) < 2) {
          selectedNumberPlaceholder.textContent = selectedNumber;
          document.getElementById('revised-statement').style.display = 'block';
          document.getElementById('revised-statement1').style.display = 'none'; // Hide revised-statement1 if selectedNumber is less than 2
      } 
      else if (parseInt(selectedNumber) >= 2) {
          selectedNumberPlaceholder1.textContent = selectedNumber;
          document.getElementById('revised-statement').style.display = 'none'; // Hide revised-statement if selectedNumber is greater than or equal to 2
          document.getElementById('revised-statement1').style.display = 'block';
      }
    }

    function plotWhatIfGraphs(consequence){
      
      d3.selectAll("#whatIfBarGraph > *").remove();
      // set the dimensions and margins of the graph
      var margin = {top: 30, right: 30, bottom: 60, left: 100},
      width = 860 - margin.left - margin.right,
      height = 300 - margin.top - margin.bottom;

      // append the svg object to the body of the page
      var svg = d3.select("#whatIfBarGraph")
      .append("svg")
      .attr("width", width + margin.left + margin.right)
      .attr("height", height + margin.top + margin.bottom)
      .append("g")
      .attr("transform",
            "translate(" + margin.left + "," + margin.top + ")");

      var text2= ""
      if (consequence == "demographics"){
        var text2 = "Population vs Date"
      }
      else if (consequence == "economics"){
        var text2 = "Labour force proportion out of population (%) vs Date"
      }
      else if (consequence == "healthcare"){
        var text2 = "Healthcare Expenditure per capita ($) vs Date"
      }
      else{
        var text2 = "Education expenditure ($) vs Date"
      }
      svg.append("text")
      .attr("x", (width / 2))             
      .attr("y", 0 - (margin.top / 2))
      .attr("text-anchor", "middle")  
      .style("font-size", "16px") 
      .style("text-decoration", "underline")  
      .text(text2);

      var dataSource =""
      if (selectedNumberWhatIfGraph == 0){
        dataSource = "data/output-zerofertility.csv"
      }
      else if (selectedNumberWhatIfGraph == 1){
        dataSource = "data/output-onefertility.csv"
      }
      else if (selectedNumberWhatIfGraph == 2){
        dataSource = "data/output-twofertility.csv"
      }
      else if (selectedNumberWhatIfGraph == 3){
        dataSource = "data/output-threefertility.csv"
      }
      else {
        dataSource = "data/output-fourfertility.csv"
      }

      //Read the data
      d3.csv( dataSource,
      //d3.csv("https://raw.githubusercontent.com/holtzy/data_to_viz/master/Example_dataset/3_TwoNumOrdered_comma.csv",

      // When reading the csv, I must format variables:
      //function(d){
      //return { date : d3.timeParse("%Y-%m-%d")(d.date), value : d.value }
      //},

      // Now I can use this dataset:
      
      function(data) {
        
      // Add X axis --> it is a date format
      var x = d3.scaleLinear()
          .domain(d3.extent(data, function(d) { return d.year; }))
          .range([0, width]);
        svg.append("g")
          .attr("transform", "translate(0," + height + ")")
          .call(d3.axisBottom(x).ticks(7));

      if (consequence == "demographics"){
        var y = d3.scaleLinear()
        .domain([0, d3.max(data, function(d) { return +d.population; })])
        .range([ height, 0 ]);
      } 
      else if (consequence == "economics"){
        var y = d3.scaleLinear()
        .domain([0, d3.max(data, function(d) { return +d.economics; })])
        .range([ height, 0 ]);
      } 
      else if (consequence == "healthcare"){
        var y = d3.scaleLinear()
        .domain([0, d3.max(data, function(d) { return +d.healthcare; })])
        .range([ height, 0 ]);
      } 
      else{
        var y = d3.scaleLinear()
        .domain([0, d3.max(data, function(d) { return +d.education; })])
        .range([ height, 0 ]);
      } 

      
      svg.append("g")
        .call(d3.axisLeft(y));

      svg
        .append("text")
        .attr("text-anchor", "middle")
        .attr("x", width / 2)
        .attr("y", height + 28)
        .style("font-size", "12px")
        .text("Year");

      if (consequence == "demographics"){
        var text = "Population"
      }
      else if (consequence == "economics"){
        var text = "Labour force proportion out of population (%)"
      }
      else if (consequence == "healthcare"){
        var text = "Healthcare Expenditure per capita ($)"
      }
      else{
        var text = "Education expenditure ($)"
      }
    
      svg
        .append("text")
        .attr("text-anchor", "end")
        .attr("transform", "rotate(-90)")
        .attr("y", -70)
        .attr("x", -10)
        .style("font-size", "12px")
        .text(text);

      // Add the line
      if (consequence == "demographics"){
        svg.append("path")
        .datum(data)
        .attr("fill", "none")
        .attr("stroke", "steelblue")
        .attr("stroke-width", 1.5)
        .attr("d", d3.line()
          .x(function(d) { return x(d.year) })
          .y(function(d) { return y(d.population) })
          )
      } 
      else if (consequence == "economics"){
        svg.append("path")
        .datum(data)
        .attr("fill", "none")
        .attr("stroke", "steelblue")
        .attr("stroke-width", 1.5)
        .attr("d", d3.line()
          .x(function(d) { return x(d.year) })
          .y(function(d) { return y(d.economics) })
          )
      } 
      else if (consequence == "healthcare"){
        svg.append("path")
        .datum(data)
        .attr("fill", "none")
        .attr("stroke", "steelblue")
        .attr("stroke-width", 1.5)
        .attr("d", d3.line()
          .x(function(d) { return x(d.year) })
          .y(function(d) { return y(d.healthcare) })
          )
      } 
      else {
        svg.append("path")
        .datum(data)
        .attr("fill", "none")
        .attr("stroke", "steelblue")
        .attr("stroke-width", 1.5)
        .attr("d", d3.line()
          .x(function(d) { return x(d.year) })
          .y(function(d) { return y(d.education) })
          )
      } 

      

      })
      
    

    }



  document.addEventListener("DOMContentLoaded", function() {

    var educationButton = document.getElementById("education-button");
    var educationParagraph = document.getElementById("education-paragraph");
    var idealEducationParagraph = document.getElementById("ideal-education-paragraph")
    educationButton.addEventListener("click", function() {
        if (selectedNumber < 2) {
            educationParagraph.classList.toggle("show");
            idealEducationParagraph.classList.remove("show"); // Ensure the other paragraph is hidden
        } else {
            idealEducationParagraph.classList.toggle("show");
            educationParagraph.classList.remove("show"); // Ensure the other paragraph is hidden
        }
    });

    var workButton = document.getElementById("work-button");
    var workParagraph = document.getElementById("work-paragraph");
    var idealWorkParagraph = document.getElementById("ideal-work-paragraph");
    workButton.addEventListener("click", function() {
      if (selectedNumber < 2) {
            workParagraph.classList.toggle("show");
            idealWorkParagraph.classList.remove("show"); // Ensure the other paragraph is hidden
        } else {
            idealWorkParagraph.classList.toggle("show");
            workParagraph.classList.remove("show"); // Ensure the other paragraph is hidden
        }
    });

    var contraceptivesButton = document.getElementById("contraceptives-button");
    var contraceptivesParagraph = document.getElementById("contraceptives-paragraph");
    var idealContraceptivesParagraph = document.getElementById("ideal-contraceptives-paragraph");
    contraceptivesButton.addEventListener("click", function() {
      if (selectedNumber < 2) {
            contraceptivesParagraph.classList.toggle("show");
            idealContraceptivesParagraph.classList.remove("show"); // Ensure the other paragraph is hidden
        } else {
            idealContraceptivesParagraph.classList.toggle("show");
            contraceptivesParagraph.classList.remove("show"); // Ensure the other paragraph is hidden
        }
    });

    var lifespanButton = document.getElementById("lifespan-button");
    var lifespanParagraph = document.getElementById("lifespan-paragraph");
    var idealLifespanParagraph = document.getElementById("ideal-lifespan-paragraph")
    lifespanButton.addEventListener("click", function() {
      if (selectedNumber < 2) {
            lifespanParagraph.classList.toggle("show");
            idealLifespanParagraph.classList.remove("show"); // Ensure the other paragraph is hidden
        } else {
            idealLifespanParagraph.classList.toggle("show");
            lifespanParagraph.classList.remove("show"); // Ensure the other paragraph is hidden
        }
    });
  });
  </script>

  <script>
      function clearChart() {
        d3.selectAll("svg").remove();
        d3.select("#my_dataviz p").remove();
        d3.select("#my_dataviz1 p").remove();
        d3.select("#my_dataviz2 p").remove();
        d3.select("#my_dataviz3 p").remove();
      } 

      
      function education() {

    clearChart("#my_dataviz");
    // Set up dimensions for the plot
  
    var margin = { top: 30, right: 30, bottom: 50, left: 50 },
      width = 500 - margin.left - margin.right,
      height = 500 - margin.top - margin.bottom;

    // Append the SVG object to the body of the page
    var svg = d3
      .select("#my_dataviz")
      .append("svg")
      .attr("width", width + margin.left + margin.right)
      .attr("height", height + margin.top + margin.bottom)
      .append("g")
      .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

    // Append graph title
    svg
      .append("text")
      .attr("x", 200)
      .attr("y", -20)
      .attr("text-anchor", "middle")
      .style("font-size", "12px")
      .text(
        "Relationships between Education Attainment in Women and Fertility Rate"
      );

    // Load data
    d3.csv("data/FINALcombinedData1.csv", function (data) {
      console.log(data)
      // Add X axis
      var x = d3
        .scaleLinear()
        .domain([
          0,
          d3.max(data, function (d) {
            return +d[
              "Fertility rate - Sex: all - Age: all - Variant: estimates_x"
            ];
          }),
        ])
        .range([0, width]);
      svg
        .append("g")
        .attr("transform", "translate(0," + height + ")")
        .call(d3.axisBottom(x));

      // X axis label
      svg.append("text")
          .attr("class", "axis-label")
          .attr("text-anchor", "middle")
          .attr("x", width / 2)
          .attr("y", height + 28)
          .text("Fertility Rate");

      d3.select("#my_dataviz")
      .append("p")
      .style("font-size", "16px")
      .style("color", "blueviolet")
      .html("There is a <b>strong negative correlation of -0.78</b> between education level and women's fertility rate");

      // Add Y axis
      var y = d3
        .scaleLinear()
        .domain([
          0,
          d3.max(data, function (d) {
            return +d[
              "Combined - average years of education for 15-64 years female youth and adults"
            ];
          }),
        ])
        .range([height, 0]);
      svg.append("g").call(d3.axisLeft(y));

      // Y axis label
      svg
        .append("text")
        .attr("text-anchor", "end")
        .attr("transform", "rotate(-90)")
        .attr("y", -40)
        .attr("x", -45)
        .style("font-size", "12px")
        .text(
          "Average years of education for 15-64 years female youth and adults"
        );

      // Add dots
      svg
        .append("g")
        .selectAll("dot")
        .data(data)
        .enter()
        .append("circle")
        .attr("cx", function (d) {
          return x(
            d["Fertility rate - Sex: all - Age: all - Variant: estimates_x"]
          );
        })
        .attr("cy", function (d) {
          return y(
            d[
              "Combined - average years of education for 15-64 years female youth and adults"
            ]
          );
        })
        .attr("r", 5)
        .style("fill", "#69b3a2");
    });
  }

  function laborForce() {
    clearChart();
    // Set up dimensions for the plot
    var margin = { top: 50, right: 30, bottom: 50, left: 50 },
      width = 500 - margin.left - margin.right,
      height = 500 - margin.top - margin.bottom;

    // Append the SVG object to the body of the page
    var svg = d3
      .select("#my_dataviz1")
      .append("svg")
      .attr("width", width + margin.left + margin.right)
      .attr("height", height + margin.top + margin.bottom)
      .append("g")
      .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

    // Append graph title
    svg
      .append("text")
      .attr("x", 180)
      .attr("y", -20)
      .attr("text-anchor", "middle")
      .style("font-size", "12px")
      .text(
        "Relationships between Labor Force Participation Rate and Fertility Rate"
      );

    // Load data
    d3.csv("data/FINALcombinedData1.csv", function (data) {
      // Add X axis
      var x = d3
        .scaleLinear()
        .domain([
          0,
          d3.max(data, function (d) {
            return +d[
              "Fertility rate - Sex: all - Age: all - Variant: estimates_x"
            ];
          }),
        ])
        .range([0, width]);
      svg
        .append("g")
        .attr("transform", "translate(0," + height + ")")
        .call(d3.axisBottom(x));

      // X axis label
      svg.append("text")
          .attr("class", "axis-label")
          .attr("text-anchor", "middle")
          .attr("x", width / 2)
          .attr("y", height + 28)
          .text("Fertility Rate");
      
          d3.select("#my_dataviz1")
            .append("p")
            .style("font-size", "16px")
            .style("color", "blueviolet")
            .html("There is a <b>weak negative correlation of -0.13</b> between labour force participation and women's fertility rate");

      // Add Y axis
      var y = d3
        .scaleLinear()
        .domain([
          0,
          d3.max(data, function (d) {
            return +d[
              "Labor force participation rate, female (% of female population ages 15+) (national estimate)"
            ];
          }),
        ])
        .range([height, 0]);
      svg.append("g").call(d3.axisLeft(y));

      // Y axis label
      svg
        .append("text")
        .attr("text-anchor", "end")
        .attr("transform", "rotate(-90)")
        .attr("y", -40)
        .attr("x", -130)
        .style("font-size", "12px")
        .text("Labor Force Participation Rate");

      // Add dots
      svg
        .append("g")
        .selectAll("dot")
        .data(data)
        .enter()
        .append("circle")
        .attr("cx", function (d) {
          return x(
            d["Fertility rate - Sex: all - Age: all - Variant: estimates_x"]
          );
        })
        .attr("cy", function (d) {
          return y(
            d[
              "Labor force participation rate, female (% of female population ages 15+) (national estimate)"
            ]
          );
        })
        .attr("r", 5)
        .style("fill", "#69b3a2");
    });
  }

  function contraceptive() {
    clearChart();
    // Set up dimensions for the plot
    var margin = { top: 50, right: 30, bottom: 50, left: 50},
      width = 500 - margin.left - margin.right,
      height = 500 - margin.top - margin.bottom;

    // Append the SVG object to the body of the page
    var svg = d3
      .select("#my_dataviz2")
      .append("svg")
      .attr("width", width + margin.left + margin.right)
      .attr("height", height + margin.top + margin.bottom)
      .append("g")
      .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

    // Append graph title
    svg
      .append("text")
      .attr("x", 180)
      .attr("y", -20)
      .attr("text-anchor", "middle")
      .style("font-size", "12px")
      .text(
        "Relationships between Contraceptive Prevalence and Fertility Rate"
      );

    // Load data
    d3.csv("data/FINALcombinedData1.csv", function (data) {
      // Add X axis
      var x = d3
        .scaleLinear()
        .domain([
          0,
          d3.max(data, function (d) {
            return +d[
              "Fertility rate - Sex: all - Age: all - Variant: estimates_x"
            ];
          }),
        ])
        .range([0, width]);
      svg
        .append("g")
        .attr("transform", "translate(0," + height + ")")
        .call(d3.axisBottom(x));

      // X axis label
      svg
        .append("text")
        .style("font-size", "12px")
        .attr("text-anchor", "middle")
        .attr("x", width / 2)
        .attr("y", height + 28)
        .text("Fertility Rate");


      d3.select("#my_dataviz2")
        .append("p")
        .style("font-size", "16px")
        .style("color", "blueviolet")
        .html("There is a <b>strong negative correlation of -0.72</b> between use of contraceptive and women's fertility rate");

      // Add Y axis
      var y = d3
        .scaleLinear()
        .domain([
          0,
          d3.max(data, function (d) {
            return +d[
              "Contraceptive prevalence, any modern method (% of married women ages 15-49)"
            ];
          }),
        ])
        .range([height, 0]);
      svg.append("g").call(d3.axisLeft(y));

      // Y axis label
      svg
        .append("text")
        .attr("text-anchor", "end")
        .attr("transform", "rotate(-90)")
        .attr("y", -40)
        .attr("x", -130)
        .style("font-size", "12px")
        .text("Contraceptive prevalence");

      // Add dots
      svg
        .append("g")
        .selectAll("dot")
        .data(data)
        .enter()
        .append("circle")
        .attr("cx", function (d) {
          return x(
            d["Fertility rate - Sex: all - Age: all - Variant: estimates_x"]
          );
        })
        .attr("cy", function (d) {
          return y(
            d[
              "Contraceptive prevalence, any modern method (% of married women ages 15-49)"
            ]
          );
        })
        .attr("r", 5)
        .style("fill", "#69b3a2");
    });
  }

  function mortalityRate() {
    clearChart();
    // Set up dimensions for the plot
    var margin = { top: 50, right: 30, bottom: 50, left: 50},
      width = 500 - margin.left - margin.right,
      height = 500 - margin.top - margin.bottom;

    // Append the SVG object to the body of the page
    var svg = d3
      .select("#my_dataviz3")
      .append("svg")
      .attr("width", width + margin.left + margin.right)
      .attr("height", height + margin.top + margin.bottom)
      .append("g")
      .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

    // Append graph title
    svg
      .append("text")
      .attr("x", 180)
      .attr("y", -20)
      .attr("text-anchor", "middle")
      .style("font-size", "12px")
      .text(
        "Relationships between Child Mortality Rate and Fertility Rate"
      );

    // Load data
    d3.csv("data/FINALcombinedData1.csv", function (data) {
      // Add X axis
      var x = d3
        .scaleLinear()
        .domain([
          0,
          d3.max(data, function (d) {
            return +d[
              "Fertility rate - Sex: all - Age: all - Variant: estimates_x"
            ];
          }),
        ])
        .range([0, width]);
      svg
        .append("g")
        .attr("transform", "translate(0," + height + ")")
        .call(d3.axisBottom(x));

      // X axis label
      svg
        .append("text")
        .attr("text-anchor", "middle")
        .attr("x", width / 2)
        .attr("y", height + 28)
        .style("font-size", "12px")
        .text("Fertility Rate");


        d3.select("#my_dataviz3")
          .append("p")
          .style("font-size", "16px")
          .style("color", "blueviolet")
          .html("There is a <b>strong positive correlation of 0.88</b> child mortality rate and women's fertility rate");

      // Add Y axis
      var y = d3
        .scaleLinear()
        .domain([
          0,
          d3.max(data, function (d) {
            return +d[
              "Child mortality rate - Sex: all - Age: 0-4 - Variant: estimates"
            ];
          }),
        ])
        .range([height, 0]);
      svg.append("g").call(d3.axisLeft(y));

      // Y axis label
      svg
        .append("text")
        .attr("text-anchor", "end")
        .attr("transform", "rotate(-90)")
        .attr("y", -40)
        .attr("x", -130)
        .style("font-size", "12px")
        .text("Child Mortality Rate");

      // Add dots
      svg
        .append("g")
        .selectAll("dot")
        .data(data)
        .enter()
        .append("circle")
        .attr("cx", function (d) {
          return x(
            d["Fertility rate - Sex: all - Age: all - Variant: estimates_x"]
          );
        })
        .attr("cy", function (d) {
          return y(
            d["Child mortality rate - Sex: all - Age: 0-4 - Variant: estimates"]
          );
        })
        .attr("r", 5)
        .style("fill", "#69b3a2");
    });
  }

  </script>
  <!-- Bootstrap core JavaScript -->
  <script src="vendor/jquery/jquery.min.js"></script>
  <script src="vendor/bootstrap/js/bootstrap.min.js"></script>

  <script src="assets/js/isotope.min.js"></script>
  <script src="assets/js/owl-carousel.js"></script>
  <script src="assets/js/tabs.js"></script>
  <script src="assets/js/popup.js"></script>
  <script src="assets/js/custom.js"></script>


</body>

</html>